hw.module @ByteSelector(%I: i32, %offset: i2) -> (O: i8) {
    %0 = comb.extract %I from 24 : (i32) -> i1
    %1 = comb.extract %I from 25 : (i32) -> i1
    %2 = comb.extract %I from 26 : (i32) -> i1
    %3 = comb.extract %I from 27 : (i32) -> i1
    %4 = comb.extract %I from 28 : (i32) -> i1
    %5 = comb.extract %I from 29 : (i32) -> i1
    %6 = comb.extract %I from 30 : (i32) -> i1
    %7 = comb.extract %I from 31 : (i32) -> i1
    %8 = comb.concat %7, %6, %5, %4, %3, %2, %1, %0 : i1, i1, i1, i1, i1, i1, i1, i1
    %9 = comb.extract %I from 16 : (i32) -> i1
    %10 = comb.extract %I from 17 : (i32) -> i1
    %11 = comb.extract %I from 18 : (i32) -> i1
    %12 = comb.extract %I from 19 : (i32) -> i1
    %13 = comb.extract %I from 20 : (i32) -> i1
    %14 = comb.extract %I from 21 : (i32) -> i1
    %15 = comb.extract %I from 22 : (i32) -> i1
    %16 = comb.extract %I from 23 : (i32) -> i1
    %17 = comb.concat %16, %15, %14, %13, %12, %11, %10, %9 : i1, i1, i1, i1, i1, i1, i1, i1
    %18 = hw.constant 2 : i2
    %19 = comb.icmp eq %offset, %18 : i2
    %21 = hw.array_create %8, %17 : i8
    %20 = hw.array_get %21[%19] : !hw.array<2xi8>
    %22 = comb.extract %I from 8 : (i32) -> i1
    %23 = comb.extract %I from 9 : (i32) -> i1
    %24 = comb.extract %I from 10 : (i32) -> i1
    %25 = comb.extract %I from 11 : (i32) -> i1
    %26 = comb.extract %I from 12 : (i32) -> i1
    %27 = comb.extract %I from 13 : (i32) -> i1
    %28 = comb.extract %I from 14 : (i32) -> i1
    %29 = comb.extract %I from 15 : (i32) -> i1
    %30 = comb.concat %29, %28, %27, %26, %25, %24, %23, %22 : i1, i1, i1, i1, i1, i1, i1, i1
    %31 = hw.constant 1 : i2
    %32 = comb.icmp eq %offset, %31 : i2
    %34 = hw.array_create %20, %30 : i8
    %33 = hw.array_get %34[%32] : !hw.array<2xi8>
    %35 = comb.extract %I from 0 : (i32) -> i1
    %36 = comb.extract %I from 1 : (i32) -> i1
    %37 = comb.extract %I from 2 : (i32) -> i1
    %38 = comb.extract %I from 3 : (i32) -> i1
    %39 = comb.extract %I from 4 : (i32) -> i1
    %40 = comb.extract %I from 5 : (i32) -> i1
    %41 = comb.extract %I from 6 : (i32) -> i1
    %42 = comb.extract %I from 7 : (i32) -> i1
    %43 = comb.concat %42, %41, %40, %39, %38, %37, %36, %35 : i1, i1, i1, i1, i1, i1, i1, i1
    %44 = hw.constant 0 : i2
    %45 = comb.icmp eq %offset, %44 : i2
    %47 = hw.array_create %33, %43 : i8
    %46 = hw.array_get %47[%45] : !hw.array<2xi8>
    hw.output %46 : i8
}
